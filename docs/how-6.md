# "十万个"怎么做：如何玩转 `Gitflow`

## 是什么

在介绍 `Gitflow` 之前，我先介绍下 `git` 的诞生背景。long long ago（1991年），
有一个叫 Linus 的芬兰人开源了大名鼎鼎的 `Linux` 系统，既然是开源的，
所以呢就有很多人给 `Linux` 提代码，然后 Linus 在手动合并，
当时提交代码是通过 [diff](https://www.ruanyifeng.com/blog/2012/08/how_to_read_diff.html)
的方式啊，这个东西我试了下，如果文件数量少并且文件内容少还行，如果多了估计"王德发"了。

事实也是如此，随着 `Linux` 项目越来越大，社区的人也越来越多，社区里也对这种方式表达了强烈的不满。
于是 Linux 用了一个"免费版"的商业版本控制系统 `BitKepper` (现在开源了)。由于本质上它是一个付费的软件，
那 `Linux` 社区里这帮富有开源精神的人看不过去了，就破解人家的协议。那人家肯定生气啊，说了只要 Linus 公开"道歉"下就行。
然后呢，这个 Linus 也不是善茬，人家用了两周自己写了一个版本控制系统：`git`。（时间发生在2005年）

从那以后，`git` 发展迅速，很多个人或组织都在用，很快就成为了最流行的版本控制系统。由于团队规模和业务都不同，出现了很多种模型（使用 `git `的方式）,
比如： `Gitflow` 、`GitHub flow`、`GitLab flow`等。

总的来说，`Gitflow` 就是一种使用 `git` 的方式，规定如何命名分支、合并分支、打tag等操作。就像现在你的公司规定的 `git` 规则一样，
只不过 `Gitflow` 更出名一些。

## 为什么

* 对团队来讲，有利于多人协作，保证每个人在项目迭代的周期内做正确的事儿。
* 对项目来说，有利于查看项目发布以来的历史，查看各个阶段做了哪些功能迭代和 bug 修复。
* 对维护和或者开发者来说，有利于查看每个人某个特定时段做了哪些事，比如在 finish release 阶段时，可以 review 代码。也可以针对某个线上版本快速回滚。

## 怎么做

在我们开始时间 `Gitflow` 之前，我们先了解下该模型下的分支类型。

主要包括：

### 主分支

* master
* develop

master 分支是一个原始的主分支。develop 分支是与 master 分支并行的分支。develop 最开始是从 master 分出来的。

master 一般就是线上（也可以说生产）环境对应的分支。所以每次要上线一个版本时，就要把**包含最终代码的分支**（注意这里，这里意味着该分支上已经没有影响线上的 bug 了，并且相关配置：版本号、BaseUrl 都是正确的了）合并到 master 分支


## 总结

参考文章：
* https://blog.csdn.net/weixin_43117449/article/details/84573917
* https://nvie.com/posts/a-successful-git-branching-model/
